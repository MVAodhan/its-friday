import Head from "next/head";
import useSound from "use-sound";
import { useState, useEffect } from "react";
import { Image, Box, Heading } from "@chakra-ui/react";

export default function Home() {
  const [playWebsites] = useSound("cassidoo-websites.mp3");
  const [pressedKey, setPressedKey] = useState("");
  useEffect(() => {
    document.addEventListener("keypress", handleSound);
    return () => document.removeEventListener("keypress", handleSound);
  });

  useEffect(() => {
    if (pressedKey === "w") {
      playWebsites();
    }
    setPressedKey("");
  }, [pressedKey]);

  const handleSound = (e) => {
    setPressedKey(e.key);
  };

  return (
    <Box
      w="100vw"
      h="100vh"
      d="flex"
      justifyContent="center"
      alignItems="center"
      flexDir="column"
    >
      <Head>
        <title>Soundidoo</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Heading as="h1" pb="10px">
        Press w for websites
      </Heading>
      <Image
        boxSize="200px"
        objectFit="fit"
        src="/smiledoo.png"
        alt="Cassidy williams"
        onClick={playWebsites}
      />
    </Box>
  );
}
